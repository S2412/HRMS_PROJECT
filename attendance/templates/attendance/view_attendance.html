{% extends 'attendance/base.html' %}
{% block content %}
<div class="container mt-4">
  <div class="text-center mb-4">
    <h4>Your Attendance Records</h4>
    <p class="text-muted">Employee: <strong class="text-primary">{{ employee_name }}</strong></p>
  </div>

  <table class="table table-bordered table-hover">
    <thead class="table-light">
      <tr>
        <th>Date</th>
        <th>Check In</th>
        <th>Check Out</th>
        <th>Status</th>
        <th>Work Hours</th>
        <th>Overtime</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      {% for record in records %}
      <tr>
        <td>{{ record.date }}</td>
        <td>{{ record.check_in|default:"-" }}</td>
        <td>{{ record.check_out|default:"-" }}</td>
        <td>{{ record.status }}</td>
        <td>{{ record.work_hours }}</td>
        <td>
          {% if record.is_overtime_manual %}
            {{ record.overtime_hours }} (Manual)
          {% elif record.work_hours > 8 %}
            {{ record.work_hours|floatformat:2 }} (Auto)
          {% else %}
            No
          {% endif %}
        </td>
        <td>
          {% if not record.check_in and not record.check_out %}
            <a href="{% url 'attendance:request_regularization_missing' record.date %}" class="btn btn-sm btn-outline-danger">Request Attendance</a>
          {% elif record.status == 'Absent' %}
            <a href="{% url 'attendance:request_regularization_absent' record.date %}" class="btn btn-sm btn-outline-warning">Request Attendance</a>
          {% elif record.status != 'Regularized' and record.id %}
            <a href="{% url 'attendance:request_regularization' record.id %}" class="btn btn-sm btn-outline-secondary">Regularize</a>
          {% endif %}
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="7" class="text-center text-muted">No records found.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}